spawn(function()
    UserInputService.InputEnded:Connect(function(key)
        if key.KeyCode == Enum.KeyCode.Z then
          KeyDown = false
    end)
end)

spawn(function()
    UserInputService.InputBegan:Connect(function(key)
        if key.KeyCode == Enum.Keycode.Z then
            KeyDown = true
        end
    end)
end)

while KeyDown == true do

    function getRoot(char)
        local rootPart = char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
        return rootPart
    end

    function random(speaker,currentList)
        
        local players = Players:GetPlayers()
        local localplayer = Players.LocalPlayer
        table.remove(players, table.find(players, localplayer))
        return {players[math.random(1,#players)]}
    end
    for i in 30 do 
            local players = getPlayer(random, speaker)
                for i,v in pairs(players,currentList)
                local char = Players[v].Character
                local pos = char and (getRoot(char) or char:FindFirstChildWhichIsA("BasePart"))
                pos = pos and pos.Position
                if not pos then
                    return print('Getposition Error','Missing character')
                end
                local roundedPosx = math.round(pos.X)
                local roundedPosy = math.round(pos.Y)
                local roundedPosZ = math.round(pos.Z)
            end
        for i,v in pairs(speaker.Character:GetDescendants()) do
            if v:IsA("Tool") then
                v.Parent = speaker:FindFirstChildOfClass("Backpack")
                v.GripPos = Vector3.new(roundedPosx,roundedPosy,roundedPosZ)
                v.Parent = speaker.Character
            end
        end
    end
end
